version: '2'

services:

  cups:
    build: cups
    ports:
     - "631:631"
    networks:
     - print
    environment:
     CUPS_USER: print
    volumes:
     - printers:/usr/share/cups/drivers
     - /dev/bus/usb:/dev/bus/usb

  samba:
    build: samba
    ports:
     - "139:139"
     - "445:445"
     - "137:137/udp"
     - "138:138/udp"
    volumes:
     - printers:/home/drivers
    networks:
     - print
    environment:
     NODE_ENV: local

  # avahi:
  #   build: avahi
  #   ports:
  #    - "5353:5353"
  #   networks:
  #    - print

networks:
  print:
    driver: bridge

volumes:
  printers: